<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Экспорт OG-изображения 1200x630</title>
  <style>
    html, body { height: 100%; margin: 0; }
    body { display: grid; place-items: center; background: #0b0d10; color: #fff; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .card { width: min(95vw, 860px); padding: 24px; background: #11151a; border: 1px solid #1d232c; border-radius: 12px; box-shadow: 0 4px 24px rgba(0,0,0,.35); }
    h1 { margin: 0 0 12px; font-size: 20px; font-weight: 600; }
    p { margin: 6px 0 16px; color: #c8d1dc; font-size: 14px; }
    button { appearance: none; border: 0; border-radius: 8px; padding: 10px 14px; background: #2a6afc; color: #fff; font-weight: 600; cursor: pointer; }
    button:disabled { opacity: .6; cursor: default; }
    .preview { margin-top: 16px; background: #0b0d10; display: flex; align-items: center; justify-content: center; border-radius: 8px; border: 1px solid #1d232c; aspect-ratio: 1200 / 630; width: 100%; }
    .note { font-size: 12px; color: #9aa7b4; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Экспорт OG-изображения (1200×630)</h1>
    <p>Нажмите кнопку, чтобы сгенерировать и скачать PNG из вашего логотипа SVG. Фон — тёмный (#0b0d10), логотип — центрирован.</p>
    <button id="exportBtn">Скачать santino_og.png</button>
  <div class="note">Если браузер спросит место сохранения — выберите папку: dev/santino.ru.com</div>
    <div class="preview" id="preview"></div>
  </div>

  <script>
    // Inline vector (group only) from santino_magneto_outlined.svg
    const inlineGroup = `<g transform="matrix(1 0 0 -1 -68 1407)">\n`+
      `  <path d="M2247 1165Q2247 1066 2168.5 996.0Q2090 926 1980 926Q1870 926 1792.0 996.0Q1714 1066 1714 1165Q1714 1188 1722 1225Q1677 1229 1665 1229Q1513 1229 1513 1102Q1513 1037 1602.5 811.0Q1692 585 1692 457Q1692 183 1389 46Q1163 -55 860 -55Q583 -55 369 22Q68 130 68 354Q68 680 623 680H1004L1077 520H780Q668 520 585 481Q477 430 477 330Q477 217 626 153Q741 104 872 104Q1038 104 1149 177Q1278 261 1278 418Q1278 526 1196.0 728.0Q1114 930 1114 1042Q1114 1407 1735 1407H1982Q2084 1407 2164 1338Q2247 1265 2247 1165ZM3264 160Q3216 0 3019 0H2640Q2478 0 2478 104Q2369 -20 2210 -20Q2093 -20 2020.0 52.0Q1947 124 1947 240Q1947 449 2107 570Q2252 680 2466 680H3037L2849 160ZM2619 520H2398L2328 287Q2322 265 2322 247Q2322 160 2492 160ZM4632 160Q4606 72 4517 30Q4454 0 4382 0H3983Q3846 0 3846 90Q3846 120 3860 160L3936 375L3592 84Q3471 0 3393 0H3209L3448 680H3809L3696 360L4001 610Q4125 711 4270 707Q4368 703 4368 603Q4368 566 4352 520L4223 160ZM5509 160Q5462 0 5259 0H4749Q4601 0 4601 104Q4601 130 4612 160L4739 520H4575L4638 680Q4813 725 4898 795Q4994 874 5103 1081H5298L5157 680H5415Q5353 520 5163 520H5097L4972 160ZM6199 1090Q6199 990 6121.5 920.0Q6044 850 5935 850Q5824 850 5746.5 920.0Q5669 990 5669 1090Q5669 1189 5746.5 1259.0Q5824 1329 5935 1329Q6044 1329 6121.5 1259.0Q6199 1189 6199 1090ZM6271 160Q6245 72 6163 30Q6104 0 6035 0H5640Q5497 0 5497 120Q5497 154 5511 193L5685 680H6048L5863 160ZM7641 160Q7615 72 7526 30Q7463 0 7391 0H6992Q6855 0 6855 90Q6855 120 6869 160L6945 375L6601 84Q6480 0 6402 0H6218L6457 680H6818L6705 360L7010 610Q7134 711 7279 707Q7377 703 7377 603Q7377 566 7361 520L7232 160ZM9331 680Q9291 520 9091 520H8465Q8498 498 8519.0 439.5Q8540 381 8536 338Q8522 171 8389 76Q8262 -15 8059 -16Q7823 -18 7696 77Q7583 161 7583 298Q7583 325 7588 352Q7614 503 7738 589Q7870 680 8090 680ZM8241 520H8012L7922 264Q7915 244 7915 226Q7915 140 8075 140Q8094 140 8108 141Z" fill="#ffffff" />\n`+
      `</g>`;

    const W = 1200, H = 630;

    function buildSvgDoc() {
      const bg = '#0b0d10';
      const lw = 9263, lh = 1462;
      const maxW = W * 0.82, maxH = H * 0.70;
      const scale = Math.min(maxW / lw, maxH / lh);
      const w2 = Math.round(lw * scale);
      const h2 = Math.round(lh * scale);
      const x = Math.round((W - w2) / 2);
      const y = Math.round((H - h2) / 2);
      return `<?xml version="1.0" encoding="UTF-8"?>\n`
        + `<svg xmlns="http://www.w3.org/2000/svg" width="${W}" height="${H}" viewBox="0 0 ${W} ${H}" preserveAspectRatio="xMidYMid meet">`
        + `<rect width="100%" height="100%" fill="${bg}"/>`
        + `<svg x="${x}" y="${y}" width="${w2}" height="${h2}" viewBox="0 0 9263 1462" preserveAspectRatio="xMidYMid meet">`
        + inlineGroup
        + `</svg>`
        + `</svg>`;
    }

    function exportPng() {
      const tpl = buildSvgDoc();
      const blob = new Blob([tpl], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(blob);
      const img = new Image();
      img.onload = () => {
        const canvas = document.createElement('canvas');
        canvas.width = W; canvas.height = H;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0);
        URL.revokeObjectURL(url);
        canvas.toBlob((pngBlob) => {
          if (!pngBlob) return alert('Не удалось создать PNG');
          const a = document.createElement('a');
          a.download = 'santino_og.png';
          a.href = URL.createObjectURL(pngBlob);
          // В некоторых браузерах автоклик блокируется — покажем ссылку явно:
          a.style.display = 'none';
          document.body.appendChild(a);
          a.click();
          setTimeout(()=>{
            URL.revokeObjectURL(a.href);
            a.remove();
          }, 1500);
        }, 'image/png');
      };
      img.onerror = () => alert('Не удалось отрендерить SVG');
      img.src = url;
    }

    // Preview without iframe (robust and simple)
    (function renderPreview(){
      const svg = buildSvgDoc();
      const blob = new Blob([svg], { type: 'image/svg+xml' });
      const url = URL.createObjectURL(blob);
      const img = new Image();
      img.src = url;
      img.alt = 'Предпросмотр OG';
      img.style.maxWidth = '100%';
      img.style.maxHeight = '100%';
      const preview = document.getElementById('preview');
      preview.innerHTML = '';
      preview.appendChild(img);
    })();

    // Bind click
    document.getElementById('exportBtn').addEventListener('click', exportPng);
  </script>
</body>
</html>
